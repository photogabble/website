{% extends "layouts/page.njk" %}

{% set page_class = 'page__article' %}
{% set ogtype = 'article' %}
{% set readingTime = content | wordStats %}
{% set filteredTags = tags | withoutTags('writing') | excludeSpecialTags(['type', 'resource']) | formatTagList(collections.topics) %}
{% set type = tags | specialTagValue('type') %}
{% set footnotes = content | extractFootnotes %}

{#{% set headingClass = 'note' %}#}
{#{% set titlePrefix %}#}
{#    {% include "components/growth.njk" %} {{ contentType }}#}
{#{% endset %}#}

{#{% set subTitle %}#}
{#    {% if growthStage === 'stub' %}scheduled for {% else %}planted on {% endif %}#}
{#    <time datetime="{{ page.date.toISOString() }}">{{ page.date | dateToFormat("DDD") }}</time>#}
{#    in: {% include "../components/tag-list.njk" %}.#}
{#    {% if modified %}#}
{#    modified on <time datetime="{{ modified.toISOString() }}">{{ modified | dateToFormat("DDD") }}</time>#}
{#    {% endif %}#}
{#    <br/>{{ readingTime.text if readingTime.words > 0 }}.#}
{#{% endset %}#}

{% block content %}
{#    {% if growthStage === 'stub' %}#}
{#    <section>#}
{#        <blockquote>#}
{#            <p>Note: This is a stub post to be filled out in the future. It has been created for the purpose of interlinking feel free to check out what links here from the list below to find related pages.</p>#}
{#        </blockquote>#}
{#    </section>#}
{#    {% endif %}#}

{#    {% if series %}#}
{#        {% set postsList = collections | seriesPosts(series) %}#}
{#        <section>#}
{#            <details>#}
{#                <summary>Series Listing <small>(click to open)</small></summary>#}
{#                {% include "components/series-list.njk" %}#}
{#            </details>#}
{#        </section>#}
{#    {% endif %}#}
<article>
    <header>
        <div class="article-header__category filled-boxes">
            <span><a href="#">{{ type }}</a></span>
            <span>Featured</span>
        </div>
        <div class="article-header__meta">
            <span>Words planted in:</span>
            <div>
                {% include "components/tag-list.njk" %}
            </div>
        </div>

        <div class="article-header__date">
            <time datetime="{{ page.date | dateToFormat('iso') }}">{{ page.date | dateToFormat('DDD') }}</time>
        </div>

        <h1 class="article-header__title">{{ title }}</h1>

        <hr/>

        {% if readingTime.words > 0 %}
            <div class="article-header__stats">
                <span>{{ readingTime.text }}</span>
            </div>
        {% endif %}
    </header>

    <section class="article-section__content">
        {% if abstract %}<p class="article-section__content-abstract">{{ abstract }}</p>{% endif %}
        <aside class="article-section__content-toc">{{ content | toc | safe }}</aside>
        <div class="article-section__content-content">{{ content | withoutFootnotes | safe }}</div>
        <aside id="sidenote-column-right" class="article-section__content-ref">
            <div style="margin-top:1rem">
                First Published: {{ page.date | dateToFormat('DDD') }} in commit <a href="#">########</a>.<br/>
                Updated: Never<br/>
                {% if reviewed %}Reviewed: {{ reviewed | dateToFormat('DDD') }}{% endif %}
            </div>
        </aside>
        {% if footnotes.length or backlinks.length %}
            <footer class="article-section__content-footer">
                {{ footnotes | safe }}

                {#    {% if tags | includesTag('wayback machine') %}#}
                {#        <hr/>#}
                {#        {% include "components/wayback-machine.njk" %}#}
                {#    {% endif %}#}

                {#    {% include "components/backlinks.njk" %}#}

                {% if backlinks.length %}
                    <section id="backlinks">
                        <h3>Pages Linking Here <a class="header-anchor" href="#backlinks">Â¶</a></h3>
                        <ul>{% for link in backlinks %}<li><a href="{{ link.url }}">{{ link.title }}</a></li>{% endfor %}</ul>
                    </section>
                {% endif %}
            </footer>
        {% endif %}
    </section>

</article>
{% endblock %}
